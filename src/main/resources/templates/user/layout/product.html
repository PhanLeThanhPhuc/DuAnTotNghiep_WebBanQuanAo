<html xmlns:th="http://www.thymeleaf.org"
	th:replace="~{/user/layout/index :: dynamic(~{::main})}">
<main>
	<section class="cat_product_area section_padding">
<!--        <form  th:action="@{|product|}" method="get">-->
            <div class="container">
                <form id="form" th:action="@{|product|}" method="get">
                    <div class="row">
                    <div class="col-lg-3">
                        <div class="left_sidebar_area">
     <!--================================================================================-->
    <!--                     <form id="form" th:action="@{|product|}" method="get">-->
                            <aside class="left_widgets p_filter_widgets">
                                <div class="l_w_title">
                                    <h3>Size</h3>
                                </div>
                                <div class="widgets_inner">
                                    <ul class="list">

                                        <input type="hidden" name="nameCategoryDetail" th:value="${nameCategoryDetail}">
<!--                                        <input type="hidden" name="sort" th:value="${sortValue}">-->
                                        <li th:each="item : ${sizeMenu}">
                                            <a>[[${item.name}]]</a>
                                            <span>
                                                 <input onchange="document.getElementById('form').submit();" th:checked="${#lists.contains(sizeId, item.id)}" name="size" th:value="${item.id}" type="checkbox" class="form-check-input">
                                            </span>
                                        </li>
<!--                                        <button type="submit">Lọc</button>-->
                                     <!-- </form> -->
                                    </ul>
                                </div>
                            </aside>
                             <aside class="left_widgets p_filter_widgets">
                                 <div class="l_w_title">
                                     <h3>Color</h3>
                                 </div>
                                <div class="widgets_inner">
                                    <ul class="list">
                                    <!--  <form id="formColor" th:action="@{|product|}" method="get">-->
                                        <li th:each="item : ${colorMenu}">
                                            <a>[[${item.name}]]</a>
                                            <span>
                                                 <input onchange="document.getElementById('form').submit();" th:checked="${#lists.contains(colorId, item.id)}" name="color" th:value="${item.id}" type="checkbox" class="form-check-input">
                                            </span>
                                        </li>
<!--                                        <button type="submit">Lọc</button>-->
                                    </ul>
                                </div>
                            </aside>
    <!--                        </form>-->
    <!--=====================================================-->
                            <aside class="left_widgets p_filter_widgets price_rangs_aside">
                                <div class="l_w_title">
                                    <h3>Price Filter</h3>
                                </div>
                                <div class="widgets_inner">
                                    <div class="range_item">
                                        <!-- <div id="slider-range"></div> -->
                                        <input type="text" class="js-range-slider" value="" />
                                        <div class="d-flex">
                                            <div class="price_text">
                                                <p>Price :</p>
                                            </div>
<!--                                            <div class="price_value d-flex justify-content-center">-->
<!--                                                <input type="text" class="js-input-from" id="amount" readonly />-->
<!--                                                <span>to</span>-->
<!--                                                <input type="text" class="js-input-to" id="amount" readonly />-->
<!--                                            </div>-->
                                        </div>
                                    </div>
                                </div>
                            </aside>
                        </div>
                    </div>
                    <div class="col-lg-9">
                        <div class="row">
                            <div class="col-lg-12">
                                <div class="product_top_bar d-flex justify-content-between align-items-center">
                                    <div class="single_product_menu">
                                        <p><span>10000 </span> Prodict Found</p>
                                    </div>
                                    <div class="single_product_menu d-flex">
                                        <h5>Short by : </h5>
                                        <select onchange="document.getElementById('form').submit();" name="sort" class="form-control" id="exampleFormControlSelect1">
                                            <option th:selected="${sortValue == 'price-asc'}" th:value="price-asc">Giá thấp đến cao</option>
                                            <option th:selected="${sortValue == 'price-desc'}" th:value="price-desc">Giá cao đến thấp</option>
                                            <option th:selected="${sortValue == 'name-az'}" th:value="name-az">A-Z</option>
                                            <option th:selected="${sortValue == 'name-za'}" th:value="name-za">Z-A</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row align-items-center latest_product_inner">
                            <div th:each="item : ${product}" class="col-lg-4 col-sm-6">
                                <div class="single_product_item">
                                    <img th:src="@{|/assets/user/user/image/${item.thumbnail}|}">
                                    <div class="single_product_text">
                                        <h4>[[${item.name}]]</h4>
                                        <h3>[[${#numbers.formatDecimal(item.price, 0, 'COMMA', 0,'POINT')}]]</h3>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-12">
                                <div class="pageination">
                                    <nav aria-label="Page navigation example">
                                         <ul class="pagination justify-content-center " id="pagination"></ul>
                                    </nav>
                                    <input id="page" name="p" type="hidden">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                </form>
            </div>
<!--        </form>-->
    </section>
    <!--================End Category Product Area =================-->

    <!-- product_list part start-->
    <section class="product_list best_seller">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-12">
                    <div class="section_tittle text-center">
                        <h2>Best Sellers <span>shop</span></h2>
                    </div>
                </div>
            </div>
            <div class="row align-items-center justify-content-between">
                <div class="col-lg-12">
                    <div class="best_product_slider owl-carousel">
                        <div th:each="item : ${product.content}" class="single_product_item">
                            <img src="@{|assets/user/user/image/${item.thumbnail}|}" alt="">
                            <div class="single_product_text">
                                <h4>[[${item.name}]]</h4>
                                <h3>$150.00</h3>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
    </section>
    <script th:inline="javascript">
        /*<![CDATA[*/
                $(function () {
                    window.pagObj = $('#pagination').twbsPagination({
                        totalPages: /*[[${product.totalPages}]]*/ 'default',
                        visiblePages: 5,
                        startPage: /*[[${product.number+1}]]*/ 'default',
                        onPageClick: function (event, page) {
                            console.info(page + ' (from options)');
                            if(page!=/*[[${product.number+1}]]*/ 'default'){
                                $('#page').val(parseInt(page-1));
                                $('#form').submit();
                            }
                        }
                    }).on('page', function (event, page) {
                        console.info(page + ' (from event listening)');
                    });
                });
        /*]]>*/
</script>
</main>